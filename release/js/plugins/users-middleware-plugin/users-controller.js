'use strict';
var path = require('path');
var UserModel = require('./user-model.js').default;
var UsersService = require('./users-service.js').default;
var users = [
    { id: 1, name: 'watch', description: 'Tell time with this amazing watch', price: 30.00 },
    { id: 2, name: 'sandals', description: 'Walk in comfort with these sandals', price: 10.00 }
];
/**
 * TODO - Describe what your controller does.
 *
 * @class         Users.Model
 * @module        Users
 * @constructor
 */
var UsersController = (function () {
    function UsersController(options) {
        this.users = new UsersService();
        console.log('Controller Constructor');
    }
    UsersController.prototype.use = function (req, res, next) {
        console.log('Time: ', Date.now());
        console.log('users-controller.use', req.method, req.url);
        next();
    };
    UsersController.prototype.all = function (req, res, next) {
        if (req.params.id) {
            req.id = req.params.id;
            console.log('Got user id', req.id);
        }
        console.log('users-controller.all', req.method, req.url);
        next();
    };
    UsersController.prototype.index = function (req, res, next) {
        next();
    };
    UsersController.prototype.get_route = function (req, res, next) {
        if (req.params.id > (users.length - 1) || req.params.id < 0) {
            res.statusCode = 404;
            res.end('Not Found');
        }
        res.json(users[req.params.id]);
    };
    UsersController.prototype.post_route = function (req, res, next) {
        var model = new UserModel(req.body);
        model.id = users.length + 1;
        console.log('creating', model);
        users.push(model);
        res.json(model);
    };
    UsersController.prototype.put_route = function (req, res, next) {
        if (req.params.id > (users.length - 1) || req.params.id < 0) {
            res.statusCode = 404;
            res.end('No product found for that ID');
        }
        users[req.params.id] = req.body;
        res.json(req.body);
    };
    UsersController.prototype.delete_route = function (req, res, next) {
        if (!req.params.id) {
            req.status(404).json({ error: 'No user found for that ID' });
        }
        users.splice(req.param.id, 1);
        res.json(users);
    };
    return UsersController;
}());
exports["default"] = UsersController;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsdWdpbnMvdXNlcnMtbWlkZGxld2FyZS1wbHVnaW4vdXNlcnMtY29udHJvbGxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFDYixJQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDN0IsSUFBTSxTQUFTLEdBQUcsT0FBTyxDQUFDLGlCQUFpQixDQUFDLENBQUMsT0FBTyxDQUFDO0FBQ3JELElBQU0sWUFBWSxHQUFHLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQztBQUUzRCxJQUFJLEtBQUssR0FBRztJQUNSLEVBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxtQ0FBbUMsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFDO0lBQ3RGLEVBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxvQ0FBb0MsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFDO0NBQzVGLENBQUM7QUFFRjs7Ozs7O0dBTUc7QUFDSDtJQUdJLHlCQUFZLE9BQU87UUFDZixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFDaEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0lBQzFDLENBQUM7SUFFRCw2QkFBRyxHQUFILFVBQUksR0FBRyxFQUFFLEdBQUcsRUFBRSxJQUFJO1FBQ2QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFDbEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxzQkFBc0IsRUFBRSxHQUFHLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN6RCxJQUFJLEVBQUUsQ0FBQztJQUNYLENBQUM7SUFFRCw2QkFBRyxHQUFILFVBQUksR0FBRyxFQUFFLEdBQUcsRUFBRSxJQUFJ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QUFBRCxDQTdEQSxBQTZEQyxJQUFBO0FBN0RELG9DQTZEQyxDQUFBIiwiZmlsZSI6InBsdWdpbnMvdXNlcnMtbWlkZGxld2FyZS1wbHVnaW4vdXNlcnMtY29udHJvbGxlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5jb25zdCBVc2VyTW9kZWwgPSByZXF1aXJlKCcuL3VzZXItbW9kZWwuanMnKS5kZWZhdWx0O1xuY29uc3QgVXNlcnNTZXJ2aWNlID0gcmVxdWlyZSgnLi91c2Vycy1zZXJ2aWNlLmpzJykuZGVmYXVsdDtcblxubGV0IHVzZXJzID0gW1xuICAgIHtpZDogMSwgbmFtZTogJ3dhdGNoJywgZGVzY3JpcHRpb246ICdUZWxsIHRpbWUgd2l0aCB0aGlzIGFtYXppbmcgd2F0Y2gnLCBwcmljZTogMzAuMDB9LFxuICAgIHtpZDogMiwgbmFtZTogJ3NhbmRhbHMnLCBkZXNjcmlwdGlvbjogJ1dhbGsgaW4gY29tZm9ydCB3aXRoIHRoZXNlIHNhbmRhbHMnLCBwcmljZTogMTAuMDB9XG5dO1xuXG4vKipcbiAqIFRPRE8gLSBEZXNjcmliZSB3aGF0IHlvdXIgY29udHJvbGxlciBkb2VzLlxuICpcbiAqIEBjbGFzcyAgICAgICAgIFVzZXJzLk1vZGVsXG4gKiBAbW9kdWxlICAgICAgICBVc2Vyc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJzQ29udHJvbGxlciB7XG4gICAgdXNlcnM6YW55O1xuXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLnVzZXJzID0gbmV3IFVzZXJzU2VydmljZSgpO1xuICAgICAgICBjb25zb2xlLmxvZygnQ29udHJvbGxlciBDb25zdHJ1Y3RvcicpO1xuICAgIH1cblxuICAgIHVzZShyZXEsIHJlcywgbmV4dCkge1xuICAgICAgICBjb25zb2xlLmxvZygnVGltZTogJywgRGF0ZS5ub3coKSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd1c2Vycy1jb250cm9sbGVyLnVzZScsIHJlcS5tZXRob2QsIHJlcS51cmwpO1xuICAgICAgICBuZXh0KCk7XG4gICAgfVxuXG4gICAgYWxsKHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgICAgIGlmIChyZXEucGFyYW1zLmlkKSB7XG4gICAgICAgICAgICByZXEuaWQgPSByZXEucGFyYW1zLmlkO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0dvdCB1c2VyIGlkJywgcmVxLmlkKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZygndXNlcnMtY29udHJvbGxlci5hbGwnLCByZXEubWV0aG9kLCByZXEudXJsKTtcbiAgICAgICAgbmV4dCgpO1xuICAgIH1cblxuICAgIGluZGV4KHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgICAgIG5leHQoKTtcbiAgICB9XG5cbiAgICBnZXRfcm91dGUocmVxLCByZXMsIG5leHQpIHtcbiAgICAgICAgaWYgKHJlcS5wYXJhbXMuaWQgPiAodXNlcnMubGVuZ3RoIC0gMSkgfHwgcmVxLnBhcmFtcy5pZCA8IDApIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDA0O1xuICAgICAgICAgICAgcmVzLmVuZCgnTm90IEZvdW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzLmpzb24odXNlcnNbcmVxLnBhcmFtcy5pZF0pO1xuICAgIH1cblxuICAgIHBvc3Rfcm91dGUocmVxLCByZXMsIG5leHQpIHtcbiAgICAgICAgdmFyIG1vZGVsID0gbmV3IFVzZXJNb2RlbChyZXEuYm9keSk7XG4gICAgICAgIG1vZGVsLmlkID0gdXNlcnMubGVuZ3RoICsgMTtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAnY3JlYXRpbmcnLCBtb2RlbFxuICAgICAgICApO1xuICAgICAgICB1c2Vycy5wdXNoKG1vZGVsKTtcbiAgICAgICAgcmVzLmpzb24obW9kZWwpO1xuICAgIH1cblxuICAgIHB1dF9yb3V0ZShyZXEsIHJlcywgbmV4dCkge1xuICAgICAgICBpZiAocmVxLnBhcmFtcy5pZCA+ICh1c2Vycy5sZW5ndGggLSAxKSB8fCByZXEucGFyYW1zLmlkIDwgMCkge1xuICAgICAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSA0MDQ7XG4gICAgICAgICAgICByZXMuZW5kKCdObyBwcm9kdWN0IGZvdW5kIGZvciB0aGF0IElEJyk7XG4gICAgICAgIH1cbiAgICAgICAgdXNlcnNbcmVxLnBhcmFtcy5pZF0gPSByZXEuYm9keTtcbiAgICAgICAgcmVzLmpzb24ocmVxLmJvZHkpO1xuICAgIH1cblxuICAgIGRlbGV0ZV9yb3V0ZShyZXEsIHJlcywgbmV4dCkge1xuICAgICAgICBpZiAoIXJlcS5wYXJhbXMuaWQpIHtcbiAgICAgICAgICAgIHJlcS5zdGF0dXMoNDA0KS5qc29uKHtlcnJvcjogJ05vIHVzZXIgZm91bmQgZm9yIHRoYXQgSUQnfSlcbiAgICAgICAgfVxuICAgICAgICB1c2Vycy5zcGxpY2UocmVxLnBhcmFtLmlkLCAxKTtcbiAgICAgICAgcmVzLmpzb24odXNlcnMpO1xuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
