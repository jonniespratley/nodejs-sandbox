'use strict';
var UsersService = require('./users-service.js');
var UserModel = (function () {
    function UserModel(obj) {
        for (var prop in obj) {
            this[prop] = obj[prop];
            console.log('UserModel', prop, '=', obj[prop]);
        }
    }
    return UserModel;
})();
exports.UserModel = UserModel;
var users = [
    { id: 1, name: 'watch', description: 'Tell time with this amazing watch', price: 30.00 },
    { id: 2, name: 'sandals', description: 'Walk in comfort with these sandals', price: 10.00 }
];
/**
 * TODO - Describe what your controller does.
 *
 * @class         Users.Model
 * @module        Users
 * @constructor
 */
var UsersController = (function () {
    function UsersController(options) {
        this.users = new UsersService.UsersService();
        console.log('Controller Constructor');
    }
    UsersController.prototype.use = function (req, res, next) {
        console.log('Time: ', Date.now());
        console.log('users-controller.use', req.method, req.url);
        next();
    };
    UsersController.prototype.all = function (req, res, next) {
        if (req.params.id) {
            req.id = req.params.id;
            console.log('Got user id', req.id);
        }
        console.log('users-controller.all', req.method, req.url);
        next();
    };
    UsersController.prototype.index = function (req, res, next) {
        next();
    };
    UsersController.prototype.get_route = function (req, res, next) {
        if (req.params.id > (users.length - 1) || req.params.id < 0) {
            res.statusCode = 404;
            res.end('Not Found');
        }
        res.json(users[req.params.id]);
    };
    UsersController.prototype.post_route = function (req, res, next) {
        var model = new UserModel(req.body);
        model.id = users.length + 1;
        console.log('creating', model);
        users.push(model);
        res.json(model);
    };
    UsersController.prototype.put_route = function (req, res, next) {
        if (req.params.id > (users.length - 1) || req.params.id < 0) {
            res.statusCode = 404;
            res.end('No product found for that ID');
        }
        users[req.params.id] = req.body;
        res.json(req.body);
    };
    UsersController.prototype.delete_route = function (req, res, next) {
        if (!req.params.id) {
            req.status(404).json({ error: 'No user found for that ID' });
        }
        users.splice(req.param.id, 1);
        res.json(users);
    };
    return UsersController;
})();
exports.UsersController = UsersController;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsdWdpbnMvdXNlcnMtbWlkZGxld2FyZS1wbHVnaW4vdXNlcnMtY29udHJvbGxlci50cyJdLCJuYW1lcyI6WyJVc2VyTW9kZWwiLCJVc2VyTW9kZWwuY29uc3RydWN0b3IiLCJVc2Vyc0NvbnRyb2xsZXIiLCJVc2Vyc0NvbnRyb2xsZXIuY29uc3RydWN0b3IiLCJVc2Vyc0NvbnRyb2xsZXIudXNlIiwiVXNlcnNDb250cm9sbGVyLmFsbCIsIlVzZXJzQ29udHJvbGxlci5pbmRleCIsIlVzZXJzQ29udHJvbGxlci5nZXRfcm91dGUiLCJVc2Vyc0NvbnRyb2xsZXIucG9zdF9yb3V0ZSIsIlVzZXJzQ29udHJvbGxlci5wdXRfcm91dGUiLCJVc2Vyc0NvbnRyb2xsZXIuZGVsZXRlX3JvdXRlIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFFYixJQUFPLFlBQVksV0FBVyxvQkFBb0IsQ0FBQyxDQUFDO0FBRXBEO0lBQ0lBLG1CQUFZQSxHQUFPQTtRQUNmQyxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxJQUFJQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNuQkEsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7WUFDdkJBLE9BQU9BLENBQUNBLEdBQUdBLENBQUNBLFdBQVdBLEVBQUVBLElBQUlBLEVBQUVBLEdBQUdBLEVBQUVBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLENBQUNBO1FBQ25EQSxDQUFDQTtJQUNMQSxDQUFDQTtJQUNMRCxnQkFBQ0E7QUFBREEsQ0FQQSxBQU9DQSxJQUFBO0FBUFksaUJBQVMsWUFPckIsQ0FBQTtBQUVELElBQUksS0FBSyxHQUFHO0lBQ1IsRUFBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLG1DQUFtQyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUM7SUFDdEYsRUFBQyxFQUFFLEVB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QUNBO0lBQ3BCQSxDQUFDQTtJQUNMUixzQkFBQ0E7QUFBREEsQ0E5REEsQUE4RENBLElBQUE7QUE5RFksdUJBQWUsa0JBOEQzQixDQUFBIiwiZmlsZSI6InBsdWdpbnMvdXNlcnMtbWlkZGxld2FyZS1wbHVnaW4vdXNlcnMtY29udHJvbGxlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcbmltcG9ydCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuaW1wb3J0IFVzZXJzU2VydmljZSA9IHJlcXVpcmUoJy4vdXNlcnMtc2VydmljZS5qcycpO1xuXG5leHBvcnQgY2xhc3MgVXNlck1vZGVsIHtcbiAgICBjb25zdHJ1Y3RvcihvYmo6YW55KSB7XG4gICAgICAgIGZvciAobGV0IHByb3AgaW4gb2JqKSB7XG4gICAgICAgICAgICB0aGlzW3Byb3BdID0gb2JqW3Byb3BdO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1VzZXJNb2RlbCcsIHByb3AsICc9Jywgb2JqW3Byb3BdKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxubGV0IHVzZXJzID0gW1xuICAgIHtpZDogMSwgbmFtZTogJ3dhdGNoJywgZGVzY3JpcHRpb246ICdUZWxsIHRpbWUgd2l0aCB0aGlzIGFtYXppbmcgd2F0Y2gnLCBwcmljZTogMzAuMDB9LFxuICAgIHtpZDogMiwgbmFtZTogJ3NhbmRhbHMnLCBkZXNjcmlwdGlvbjogJ1dhbGsgaW4gY29tZm9ydCB3aXRoIHRoZXNlIHNhbmRhbHMnLCBwcmljZTogMTAuMDB9XG5dO1xuXG4vKipcbiAqIFRPRE8gLSBEZXNjcmliZSB3aGF0IHlvdXIgY29udHJvbGxlciBkb2VzLlxuICpcbiAqIEBjbGFzcyAgICAgICAgIFVzZXJzLk1vZGVsXG4gKiBAbW9kdWxlICAgICAgICBVc2Vyc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbmV4cG9ydCBjbGFzcyBVc2Vyc0NvbnRyb2xsZXIge1xuICAgIHVzZXJzOmFueTtcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy51c2VycyA9IG5ldyBVc2Vyc1NlcnZpY2UuVXNlcnNTZXJ2aWNlKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdDb250cm9sbGVyIENvbnN0cnVjdG9yJyk7XG4gICAgfVxuXG5cbiAgICB1c2UocmVxLCByZXMsIG5leHQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1RpbWU6ICcsIERhdGUubm93KCkpO1xuICAgICAgICBjb25zb2xlLmxvZygndXNlcnMtY29udHJvbGxlci51c2UnLCByZXEubWV0aG9kLCByZXEudXJsKTtcbiAgICAgICAgbmV4dCgpO1xuICAgIH1cblxuICAgIGFsbChyZXEsIHJlcywgbmV4dCkge1xuICAgICAgICBpZiAocmVxLnBhcmFtcy5pZCkge1xuICAgICAgICAgICAgcmVxLmlkID0gcmVxLnBhcmFtcy5pZDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHb3QgdXNlciBpZCcsIHJlcS5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coJ3VzZXJzLWNvbnRyb2xsZXIuYWxsJywgcmVxLm1ldGhvZCwgcmVxLnVybCk7XG4gICAgICAgIG5leHQoKTtcbiAgICB9XG5cbiAgICBpbmRleChyZXEsIHJlcywgbmV4dCkge1xuICAgICAgICBuZXh0KCk7XG4gICAgfVxuXG4gICAgZ2V0X3JvdXRlKHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgICAgIGlmIChyZXEucGFyYW1zLmlkID4gKHVzZXJzLmxlbmd0aCAtIDEpIHx8IHJlcS5wYXJhbXMuaWQgPCAwKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwNDtcbiAgICAgICAgICAgIHJlcy5lbmQoJ05vdCBGb3VuZCcpO1xuICAgICAgICB9XG4gICAgICAgIHJlcy5qc29uKHVzZXJzW3JlcS5wYXJhbXMuaWRdKTtcbiAgICB9XG5cbiAgICBwb3N0X3JvdXRlKHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgICAgIHZhciBtb2RlbCA9IG5ldyBVc2VyTW9kZWwocmVxLmJvZHkpO1xuICAgICAgICBtb2RlbC5pZCA9IHVzZXJzLmxlbmd0aCArIDE7XG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgJ2NyZWF0aW5nJywgbW9kZWxcbiAgICAgICAgKTtcbiAgICAgICAgdXNlcnMucHVzaChtb2RlbCk7XG4gICAgICAgIHJlcy5qc29uKG1vZGVsKTtcbiAgICB9XG5cbiAgICBwdXRfcm91dGUocmVxLCByZXMsIG5leHQpIHtcbiAgICAgICAgaWYgKHJlcS5wYXJhbXMuaWQgPiAodXNlcnMubGVuZ3RoIC0gMSkgfHwgcmVxLnBhcmFtcy5pZCA8IDApIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDA0O1xuICAgICAgICAgICAgcmVzLmVuZCgnTm8gcHJvZHVjdCBmb3VuZCBmb3IgdGhhdCBJRCcpO1xuICAgICAgICB9XG4gICAgICAgIHVzZXJzW3JlcS5wYXJhbXMuaWRdID0gcmVxLmJvZHk7XG4gICAgICAgIHJlcy5qc29uKHJlcS5ib2R5KTtcbiAgICB9XG5cbiAgICBkZWxldGVfcm91dGUocmVxLCByZXMsIG5leHQpIHtcbiAgICAgICAgaWYgKCFyZXEucGFyYW1zLmlkKSB7XG4gICAgICAgICAgICByZXEuc3RhdHVzKDQwNCkuanNvbih7ZXJyb3I6ICdObyB1c2VyIGZvdW5kIGZvciB0aGF0IElEJ30pXG4gICAgICAgIH1cbiAgICAgICAgdXNlcnMuc3BsaWNlKHJlcS5wYXJhbS5pZCwgMSk7XG4gICAgICAgIHJlcy5qc29uKHVzZXJzKTtcbiAgICB9XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
