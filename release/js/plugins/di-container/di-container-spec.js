'use strict';
var assert = require('assert');
var DIContainer = require('./').default;
var mockProgram = null;
var _program = null;
var container = null;
var testConfig = {
    username: 'test',
    password: 'test',
    host: 'localhost'
};
var ApiFactory = function (config) {
    var LocalApi = (function () {
        function LocalApi(c) {
            console.warn('LocalApi.constructor', c);
        }
        LocalApi.prototype.post = function (obj) {
            console.warn('post', obj);
        };
        LocalApi.prototype.get = function (obj) {
            console.warn('get', obj);
        };
        return LocalApi;
    }());
    return new LocalApi(config);
};
var DbService = function (config, someModule) {
    var LocalStore = (function () {
        function LocalStore(c) {
            console.warn('LocalStore.constructor', c);
        }
        LocalStore.prototype.put = function (obj) {
            console.warn('put', obj);
        };
        LocalStore.prototype.allDocs = function (o) {
            console.warn('allDocs', o);
        };
        LocalStore.prototype.remove = function (obj) {
            console.warn('save', obj);
        };
        LocalStore.prototype.get = function (id) {
            console.warn('Find by', id);
        };
        return LocalStore;
    }());
    return new LocalStore(config);
};
describe('DIContainer', function () {
    before(function () {
        container = DIContainer.module('testApp');
        container.register('config', testConfig);
    });
    it('should create instance', function (done) {
        assert(container instanceof DIContainer);
        done();
    });
    it('register(name, value) - should register module by name', function (done) {
        assert(container.register);
        container.register('someModule', {
            name: 'value'
        });
        done();
    });
    it('factory(name, obj) - should register module by name', function (done) {
        assert(container.factory);
        container.factory('Api', ApiFactory);
        done();
    });
    it('service(name, prototype) - should register service by name', function (done) {
        assert(container.service);
        container.service('Db', new DbService());
        done();
    });
    it('get(name) - should return registered module by name', function (done) {
        assert(container.get);
        assert(container.get('someModule').name === 'value');
        done();
    });
    it('get(factory) - should return instance of factory', function (done) {
        assert(container.get('Api').post);
        done();
    });
    it('get(name) - should return new instance of service', function (done) {
        assert(container.get('Db').get);
        done();
    });
    it('get(name) - should throw error if service does not exist', function (done) {
        assert.throws(function () {
            container.get('MyApi');
        }, Error);
        done();
    });
    it('inject(service) - inject dependencies into service', function (done) {
        assert(container.inject(DbService));
        done();
    });
    it('modules - should contain Map of dependencies', function (done) {
        assert(container.modules);
        assert(container.modules.get);
        assert(container.modules.set);
        assert(container.modules.has);
        assert(container.modules.keys);
        assert(container.modules.values);
        assert(container.modules instanceof Map);
        done();
    });
    it('modules.has() - should return true if module exists', function (done) {
        assert(container.modules.has('Api') === true);
        assert(container.modules.has('Unknown') === false);
        done();
    });
    it('modules.keys() - should return all module keys', function (done) {
        var keys = container.modules.keys();
        console.log(keys);
        assert(keys);
        done();
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsdWdpbnMvZGktY29udGFpbmVyL2RpLWNvbnRhaW5lci1zcGVjLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQUNiLElBQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUNqQyxJQUFNLFdBQVcsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDO0FBQzFDLElBQUksV0FBVyxHQUFHLElBQUksQ0FBQztBQUN2QixJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUM7QUFDcEIsSUFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDO0FBQ3JCLElBQUksVUFBVSxHQUFHO0lBQ2YsUUFBUSxFQUFFLE1BQU07SUFDaEIsUUFBUSxFQUFFLE1BQU07SUFDaEIsSUFBSSxFQUFFLFdBQVc7Q0FDbEIsQ0FBQztBQUNGLElBQU0sVUFBVSxHQUFHLFVBQVMsTUFBTTtJQUNoQztRQUNFLGtCQUFZLENBQUM7WUFDWCxPQUFPLENBQUMsSUFBSSxDQUFDLHNCQUFzQixFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzFDLENBQUM7UUFFRCx1QkFBSSxHQUFKLFVBQUssR0FBRztZQUNOLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzVCLENBQUM7UUFFRCxzQkFBRyxHQUFILFVBQUksR0FBRztZQUNMLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzNCLENBQUM7UUFDSCxlQUFDO0lBQUQsQ0FaQSxBQVlDLElBQUE7SUFDRCxNQUFNLENBQUMsSUFBSSxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDOUIsQ0FBQyxDQUFDO0FBQ0YsSUFBTSxTQUFTLEdBQUcsVUFBUyxNQUFNLEVBQUUsVUFBVTtJQUMzQztRQUNFLG9CQUFZLENBQUM7WUFDWCxPQUFPLENBQUMsSUFBSSxDQUFDLHdCQUF3QixFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzVDLENBQUM7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Q0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLGdEQUFnRCxFQUFFLFVBQVMsSUFBSTtRQUNoRSxJQUFJLElBQUksR0FBRyxTQUFTLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ3BDLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbEIsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2IsSUFBSSxFQUFFLENBQUM7SUFDVCxDQUFDLENBQUMsQ0FBQztBQUVMLENBQUMsQ0FBQyxDQUFDIiwiZmlsZSI6InBsdWdpbnMvZGktY29udGFpbmVyL2RpLWNvbnRhaW5lci1zcGVjLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuY29uc3QgYXNzZXJ0ID0gcmVxdWlyZSgnYXNzZXJ0Jyk7XG5jb25zdCBESUNvbnRhaW5lciA9IHJlcXVpcmUoJy4vJykuZGVmYXVsdDtcbnZhciBtb2NrUHJvZ3JhbSA9IG51bGw7XG52YXIgX3Byb2dyYW0gPSBudWxsO1xudmFyIGNvbnRhaW5lciA9IG51bGw7XG52YXIgdGVzdENvbmZpZyA9IHtcbiAgdXNlcm5hbWU6ICd0ZXN0JyxcbiAgcGFzc3dvcmQ6ICd0ZXN0JyxcbiAgaG9zdDogJ2xvY2FsaG9zdCdcbn07XG5jb25zdCBBcGlGYWN0b3J5ID0gZnVuY3Rpb24oY29uZmlnKSB7XG4gIGNsYXNzIExvY2FsQXBpIHtcbiAgICBjb25zdHJ1Y3RvcihjKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0xvY2FsQXBpLmNvbnN0cnVjdG9yJywgYyk7XG4gICAgfVxuXG4gICAgcG9zdChvYmopIHtcbiAgICAgIGNvbnNvbGUud2FybigncG9zdCcsIG9iaik7XG4gICAgfVxuXG4gICAgZ2V0KG9iaikge1xuICAgICAgY29uc29sZS53YXJuKCdnZXQnLCBvYmopO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbmV3IExvY2FsQXBpKGNvbmZpZyk7XG59O1xuY29uc3QgRGJTZXJ2aWNlID0gZnVuY3Rpb24oY29uZmlnLCBzb21lTW9kdWxlKSB7XG4gIGNsYXNzIExvY2FsU3RvcmUge1xuICAgIGNvbnN0cnVjdG9yKGMpIHtcbiAgICAgIGNvbnNvbGUud2FybignTG9jYWxTdG9yZS5jb25zdHJ1Y3RvcicsIGMpO1xuICAgIH1cblxuICAgIHB1dChvYmopIHtcbiAgICAgIGNvbnNvbGUud2FybigncHV0Jywgb2JqKTtcbiAgICB9XG5cbiAgICBhbGxEb2NzKG8pIHtcbiAgICAgIGNvbnNvbGUud2FybignYWxsRG9jcycsIG8pO1xuICAgIH1cblxuICAgIHJlbW92ZShvYmopIHtcbiAgICAgIGNvbnNvbGUud2Fybignc2F2ZScsIG9iaik7XG4gICAgfVxuXG4gICAgZ2V0KGlkKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0ZpbmQgYnknLCBpZCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBuZXcgTG9jYWxTdG9yZShjb25maWcpO1xufTtcblxuZGVzY3JpYmUoJ0RJQ29udGFpbmVyJywgZnVuY3Rpb24oKSB7XG4gIGJlZm9yZShmdW5jdGlvbigpIHtcbiAgICBjb250YWluZXIgPSBESUNvbnRhaW5lci5tb2R1bGUoJ3Rlc3RBcHAnKTtcbiAgICBjb250YWluZXIucmVnaXN0ZXIoJ2NvbmZpZycsIHRlc3RDb25maWcpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGNyZWF0ZSBpbnN0YW5jZScsIGZ1bmN0aW9uKGRvbmUpIHtcbiAgICBhc3NlcnQoY29udGFpbmVyIGluc3RhbmNlb2YgRElDb250YWluZXIpO1xuICAgIGRvbmUoKTtcbiAgfSk7XG5cbiAgaXQoJ3JlZ2lzdGVyKG5hbWUsIHZhbHVlKSAtIHNob3VsZCByZWdpc3RlciBtb2R1bGUgYnkgbmFtZScsIGZ1bmN0aW9uKGRvbmUpIHtcbiAgICBhc3NlcnQoY29udGFpbmVyLnJlZ2lzdGVyKTtcbiAgICBjb250YWluZXIucmVnaXN0ZXIoJ3NvbWVNb2R1bGUnLCB7XG4gICAgICBuYW1lOiAndmFsdWUnXG4gICAgfSk7XG4gICAgZG9uZSgpO1xuICB9KTtcblxuICBpdCgnZmFjdG9yeShuYW1lLCBvYmopIC0gc2hvdWxkIHJlZ2lzdGVyIG1vZHVsZSBieSBuYW1lJywgZnVuY3Rpb24oZG9uZSkge1xuICAgIGFzc2VydChjb250YWluZXIuZmFjdG9yeSk7XG4gICAgY29udGFpbmVyLmZhY3RvcnkoJ0FwaScsIEFwaUZhY3RvcnkpO1xuICAgIGRvbmUoKTtcbiAgfSk7XG5cbiAgaXQoJ3NlcnZpY2UobmFtZSwgcHJvdG90eXBlKSAtIHNob3VsZCByZWdpc3RlciBzZXJ2aWNlIGJ5IG5hbWUnLCBmdW5jdGlvbihkb25lKSB7XG4gICAgYXNzZXJ0KGNvbnRhaW5lci5zZXJ2aWNlKTtcbiAgICBjb250YWluZXIuc2VydmljZSgnRGInLCBuZXcgRGJTZXJ2aWNlKCkpO1xuICAgIGRvbmUoKTtcbiAgfSk7XG5cbiAgaXQoJ2dldChuYW1lKSAtIHNob3VsZCByZXR1cm4gcmVnaXN0ZXJlZCBtb2R1bGUgYnkgbmFtZScsIGZ1bmN0aW9uKGRvbmUpIHtcbiAgICBhc3NlcnQoY29udGFpbmVyLmdldCk7XG4gICAgYXNzZXJ0KGNvbnRhaW5lci5nZXQoJ3NvbWVNb2R1bGUnKS5uYW1lID09PSAndmFsdWUnKTtcbiAgICBkb25lKCk7XG4gIH0pO1xuXG4gIGl0KCdnZXQoZmFjdG9yeSkgLSBzaG91bGQgcmV0dXJuIGluc3RhbmNlIG9mIGZhY3RvcnknLCBmdW5jdGlvbihkb25lKSB7XG4gICAgYXNzZXJ0KGNvbnRhaW5lci5nZXQoJ0FwaScpLnBvc3QpO1xuICAgIGRvbmUoKTtcbiAgfSk7XG5cbiAgaXQoJ2dldChuYW1lKSAtIHNob3VsZCByZXR1cm4gbmV3IGluc3RhbmNlIG9mIHNlcnZpY2UnLCBmdW5jdGlvbihkb25lKSB7XG4gICAgYXNzZXJ0KGNvbnRhaW5lci5nZXQoJ0RiJykuZ2V0KTtcbiAgICBkb25lKCk7XG4gIH0pO1xuXG4gIGl0KCdnZXQobmFtZSkgLSBzaG91bGQgdGhyb3cgZXJyb3IgaWYgc2VydmljZSBkb2VzIG5vdCBleGlzdCcsIGZ1bmN0aW9uKGRvbmUpIHtcbiAgICBhc3NlcnQudGhyb3dzKGZ1bmN0aW9uKCkge1xuICAgICAgY29udGFpbmVyLmdldCgnTXlBcGknKTtcbiAgICB9LCBFcnJvcik7XG4gICAgZG9uZSgpO1xuICB9KTtcblxuICBpdCgnaW5qZWN0KHNlcnZpY2UpIC0gaW5qZWN0IGRlcGVuZGVuY2llcyBpbnRvIHNlcnZpY2UnLCBmdW5jdGlvbihkb25lKSB7XG4gICAgYXNzZXJ0KGNvbnRhaW5lci5pbmplY3QoRGJTZXJ2aWNlKSk7XG4gICAgZG9uZSgpO1xuICB9KTtcblxuICBpdCgnbW9kdWxlcyAtIHNob3VsZCBjb250YWluIE1hcCBvZiBkZXBlbmRlbmNpZXMnLCBmdW5jdGlvbihkb25lKSB7XG4gICAgYXNzZXJ0KGNvbnRhaW5lci5tb2R1bGVzKTtcbiAgICBhc3NlcnQoY29udGFpbmVyLm1vZHVsZXMuZ2V0KTtcbiAgICBhc3NlcnQoY29udGFpbmVyLm1vZHVsZXMuc2V0KTtcbiAgICBhc3NlcnQoY29udGFpbmVyLm1vZHVsZXMuaGFzKTtcbiAgICBhc3NlcnQoY29udGFpbmVyLm1vZHVsZXMua2V5cyk7XG4gICAgYXNzZXJ0KGNvbnRhaW5lci5tb2R1bGVzLnZhbHVlcyk7XG4gICAgYXNzZXJ0KGNvbnRhaW5lci5tb2R1bGVzIGluc3RhbmNlb2YgTWFwKTtcbiAgICBkb25lKCk7XG4gIH0pO1xuXG4gIGl0KCdtb2R1bGVzLmhhcygpIC0gc2hvdWxkIHJldHVybiB0cnVlIGlmIG1vZHVsZSBleGlzdHMnLCBmdW5jdGlvbihkb25lKSB7XG4gICAgYXNzZXJ0KGNvbnRhaW5lci5tb2R1bGVzLmhhcygnQXBpJykgPT09IHRydWUpO1xuICAgIGFzc2VydChjb250YWluZXIubW9kdWxlcy5oYXMoJ1Vua25vd24nKSA9PT0gZmFsc2UpO1xuICAgIGRvbmUoKTtcbiAgfSk7XG5cbiAgaXQoJ21vZHVsZXMua2V5cygpIC0gc2hvdWxkIHJldHVybiBhbGwgbW9kdWxlIGtleXMnLCBmdW5jdGlvbihkb25lKSB7XG4gICAgdmFyIGtleXMgPSBjb250YWluZXIubW9kdWxlcy5rZXlzKCk7XG4gICAgY29uc29sZS5sb2coa2V5cyk7XG4gICAgYXNzZXJ0KGtleXMpO1xuICAgIGRvbmUoKTtcbiAgfSk7XG5cbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
