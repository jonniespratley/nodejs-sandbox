'use strict';
var assert = require('assert');
var DIContainer = require('./').default;
var mockProgram = null;
var _program = null;
var container = null;
var testConfig = {
    username: 'test',
    password: 'test',
    host: 'localhost'
};
var ApiFactory = function (config) {
    var LocalApi = (function () {
        function LocalApi(c) {
            console.warn('LocalApi.constructor', c);
        }
        LocalApi.prototype.post = function (obj) {
            console.warn('post', obj);
        };
        LocalApi.prototype.get = function (obj) {
            console.warn('get', obj);
        };
        return LocalApi;
    })();
    return new LocalApi(config);
};
var DbService = function (config, someModule) {
    var LocalStore = (function () {
        function LocalStore(c) {
            console.warn('LocalStore.constructor', c);
        }
        LocalStore.prototype.put = function (obj) {
            console.warn('put', obj);
        };
        LocalStore.prototype.allDocs = function (o) {
            console.warn('allDocs', o);
        };
        LocalStore.prototype.remove = function (obj) {
            console.warn('save', obj);
        };
        LocalStore.prototype.get = function (id) {
            console.warn('Find by', id);
        };
        return LocalStore;
    })();
    return new LocalStore(config);
};
describe('DIContainer', function () {
    before(function () {
        container = DIContainer.module('testApp');
        container.register('config', testConfig);
    });
    it('should create instance', function (done) {
        assert(container instanceof DIContainer);
        done();
    });
    it('register(name, value) - should register module by name', function (done) {
        assert(container.register);
        container.register('someModule', {
            name: 'value'
        });
        done();
    });
    it('factory(name, obj) - should register module by name', function (done) {
        assert(container.factory);
        container.factory('Api', ApiFactory);
        done();
    });
    it('service(name, prototype) - should register service by name', function (done) {
        assert(container.service);
        container.service('Db', new DbService());
        done();
    });
    it('get(name) - should return registered module by name', function (done) {
        assert(container.get);
        assert(container.get('someModule').name === 'value');
        done();
    });
    it('get(factory) - should return instance of factory', function (done) {
        assert(container.get('Api').post);
        done();
    });
    it('get(name) - should return new instance of service', function (done) {
        assert(container.get('Db').get);
        done();
    });
    it('get(name) - should throw error if service does not exist', function (done) {
        assert.throws(function () {
            container.get('MyApi');
        }, Error);
        done();
    });
    it('inject(service) - inject dependencies into service', function (done) {
        assert(container.inject(DbService));
        done();
    });
    it('modules - should contain Map of dependencies', function (done) {
        assert(container.modules);
        assert(container.modules.get);
        assert(container.modules.set);
        assert(container.modules.has);
        assert(container.modules.keys);
        assert(container.modules.values);
        assert(container.modules instanceof Map);
        done();
    });
    it('modules.has() - should return true if module exists', function (done) {
        assert(container.modules.has('Api') === true);
        assert(container.modules.has('Unknown') === false);
        done();
    });
    it('modules.keys() - should return all module keys', function (done) {
        var keys = container.modules.keys();
        console.log(keys);
        assert(keys);
        done();
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsdWdpbnMvZGktY29udGFpbmVyL2RpLWNvbnRhaW5lci1zcGVjLnRzIl0sIm5hbWVzIjpbIkxvY2FsQXBpIiwiTG9jYWxBcGkuY29uc3RydWN0b3IiLCJMb2NhbEFwaS5wb3N0IiwiTG9jYWxBcGkuZ2V0IiwiTG9jYWxTdG9yZSIsIkxvY2FsU3RvcmUuY29uc3RydWN0b3IiLCJMb2NhbFN0b3JlLnB1dCIsIkxvY2FsU3RvcmUuYWxsRG9jcyIsIkxvY2FsU3RvcmUucmVtb3ZlIiwiTG9jYWxTdG9yZS5nZXQiXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQUNiLElBQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUNqQyxJQUFNLFdBQVcsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDO0FBQzFDLElBQUksV0FBVyxHQUFHLElBQUksQ0FBQztBQUN2QixJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUM7QUFDcEIsSUFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDO0FBQ3JCLElBQUksVUFBVSxHQUFHO0lBQ2YsUUFBUSxFQUFFLE1BQU07SUFDaEIsUUFBUSxFQUFFLE1BQU07SUFDaEIsSUFBSSxFQUFFLFdBQVc7Q0FDbEIsQ0FBQztBQUNGLElBQU0sVUFBVSxHQUFHLFVBQVMsTUFBTTtJQUNoQztRQUNFQSxrQkFBWUEsQ0FBQ0E7WUFDWEMsT0FBT0EsQ0FBQ0EsSUFBSUEsQ0FBQ0Esc0JBQXNCQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUMxQ0EsQ0FBQ0E7UUFFREQsdUJBQUlBLEdBQUpBLFVBQUtBLEdBQUdBO1lBQ05FLE9BQU9BLENBQUNBLElBQUlBLENBQUNBLE1BQU1BLEVBQUVBLEdBQUdBLENBQUNBLENBQUNBO1FBQzVCQSxDQUFDQTtRQUVERixzQkFBR0EsR0FBSEEsVUFBSUEsR0FBR0E7WUFDTEcsT0FBT0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsRUFBRUEsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFD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Q0FBQztRQUNqQyxNQUFNLENBQUMsU0FBUyxDQUFDLE9BQU8sWUFBWSxHQUFHLENBQUMsQ0FBQztRQUN6QyxJQUFJLEVBQUUsQ0FBQztJQUNULENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLHFEQUFxRCxFQUFFLFVBQVMsSUFBSTtRQUNyRSxNQUFNLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUM7UUFDOUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFDO1FBQ25ELElBQUksRUFBRSxDQUFDO0lBQ1QsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsZ0RBQWdELEVBQUUsVUFBUyxJQUFJO1FBQ2hFLElBQUksSUFBSSxHQUFHLFNBQVMsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDcEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNsQixNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDYixJQUFJLEVBQUUsQ0FBQztJQUNULENBQUMsQ0FBQyxDQUFDO0FBRUwsQ0FBQyxDQUFDLENBQUMiLCJmaWxlIjoicGx1Z2lucy9kaS1jb250YWluZXIvZGktY29udGFpbmVyLXNwZWMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5jb25zdCBhc3NlcnQgPSByZXF1aXJlKCdhc3NlcnQnKTtcbmNvbnN0IERJQ29udGFpbmVyID0gcmVxdWlyZSgnLi8nKS5kZWZhdWx0O1xudmFyIG1vY2tQcm9ncmFtID0gbnVsbDtcbnZhciBfcHJvZ3JhbSA9IG51bGw7XG52YXIgY29udGFpbmVyID0gbnVsbDtcbnZhciB0ZXN0Q29uZmlnID0ge1xuICB1c2VybmFtZTogJ3Rlc3QnLFxuICBwYXNzd29yZDogJ3Rlc3QnLFxuICBob3N0OiAnbG9jYWxob3N0J1xufTtcbmNvbnN0IEFwaUZhY3RvcnkgPSBmdW5jdGlvbihjb25maWcpIHtcbiAgY2xhc3MgTG9jYWxBcGkge1xuICAgIGNvbnN0cnVjdG9yKGMpIHtcbiAgICAgIGNvbnNvbGUud2FybignTG9jYWxBcGkuY29uc3RydWN0b3InLCBjKTtcbiAgICB9XG5cbiAgICBwb3N0KG9iaikge1xuICAgICAgY29uc29sZS53YXJuKCdwb3N0Jywgb2JqKTtcbiAgICB9XG5cbiAgICBnZXQob2JqKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ2dldCcsIG9iaik7XG4gICAgfVxuICB9XG4gIHJldHVybiBuZXcgTG9jYWxBcGkoY29uZmlnKTtcbn07XG5jb25zdCBEYlNlcnZpY2UgPSBmdW5jdGlvbihjb25maWcsIHNvbWVNb2R1bGUpIHtcbiAgY2xhc3MgTG9jYWxTdG9yZSB7XG4gICAgY29uc3RydWN0b3IoYykge1xuICAgICAgY29uc29sZS53YXJuKCdMb2NhbFN0b3JlLmNvbnN0cnVjdG9yJywgYyk7XG4gICAgfVxuXG4gICAgcHV0KG9iaikge1xuICAgICAgY29uc29sZS53YXJuKCdwdXQnLCBvYmopO1xuICAgIH1cblxuICAgIGFsbERvY3Mobykge1xuICAgICAgY29uc29sZS53YXJuKCdhbGxEb2NzJywgbyk7XG4gICAgfVxuXG4gICAgcmVtb3ZlKG9iaikge1xuICAgICAgY29uc29sZS53YXJuKCdzYXZlJywgb2JqKTtcbiAgICB9XG5cbiAgICBnZXQoaWQpIHtcbiAgICAgIGNvbnNvbGUud2FybignRmluZCBieScsIGlkKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5ldyBMb2NhbFN0b3JlKGNvbmZpZyk7XG59O1xuXG5kZXNjcmliZSgnRElDb250YWluZXInLCBmdW5jdGlvbigpIHtcbiAgYmVmb3JlKGZ1bmN0aW9uKCkge1xuICAgIGNvbnRhaW5lciA9IERJQ29udGFpbmVyLm1vZHVsZSgndGVzdEFwcCcpO1xuICAgIGNvbnRhaW5lci5yZWdpc3RlcignY29uZmlnJywgdGVzdENvbmZpZyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgY3JlYXRlIGluc3RhbmNlJywgZnVuY3Rpb24oZG9uZSkge1xuICAgIGFzc2VydChjb250YWluZXIgaW5zdGFuY2VvZiBESUNvbnRhaW5lcik7XG4gICAgZG9uZSgpO1xuICB9KTtcblxuICBpdCgncmVnaXN0ZXIobmFtZSwgdmFsdWUpIC0gc2hvdWxkIHJlZ2lzdGVyIG1vZHVsZSBieSBuYW1lJywgZnVuY3Rpb24oZG9uZSkge1xuICAgIGFzc2VydChjb250YWluZXIucmVnaXN0ZXIpO1xuICAgIGNvbnRhaW5lci5yZWdpc3Rlcignc29tZU1vZHVsZScsIHtcbiAgICAgIG5hbWU6ICd2YWx1ZSdcbiAgICB9KTtcbiAgICBkb25lKCk7XG4gIH0pO1xuXG4gIGl0KCdmYWN0b3J5KG5hbWUsIG9iaikgLSBzaG91bGQgcmVnaXN0ZXIgbW9kdWxlIGJ5IG5hbWUnLCBmdW5jdGlvbihkb25lKSB7XG4gICAgYXNzZXJ0KGNvbnRhaW5lci5mYWN0b3J5KTtcbiAgICBjb250YWluZXIuZmFjdG9yeSgnQXBpJywgQXBpRmFjdG9yeSk7XG4gICAgZG9uZSgpO1xuICB9KTtcblxuICBpdCgnc2VydmljZShuYW1lLCBwcm90b3R5cGUpIC0gc2hvdWxkIHJlZ2lzdGVyIHNlcnZpY2UgYnkgbmFtZScsIGZ1bmN0aW9uKGRvbmUpIHtcbiAgICBhc3NlcnQoY29udGFpbmVyLnNlcnZpY2UpO1xuICAgIGNvbnRhaW5lci5zZXJ2aWNlKCdEYicsIG5ldyBEYlNlcnZpY2UoKSk7XG4gICAgZG9uZSgpO1xuICB9KTtcblxuICBpdCgnZ2V0KG5hbWUpIC0gc2hvdWxkIHJldHVybiByZWdpc3RlcmVkIG1vZHVsZSBieSBuYW1lJywgZnVuY3Rpb24oZG9uZSkge1xuICAgIGFzc2VydChjb250YWluZXIuZ2V0KTtcbiAgICBhc3NlcnQoY29udGFpbmVyLmdldCgnc29tZU1vZHVsZScpLm5hbWUgPT09ICd2YWx1ZScpO1xuICAgIGRvbmUoKTtcbiAgfSk7XG5cbiAgaXQoJ2dldChmYWN0b3J5KSAtIHNob3VsZCByZXR1cm4gaW5zdGFuY2Ugb2YgZmFjdG9yeScsIGZ1bmN0aW9uKGRvbmUpIHtcbiAgICBhc3NlcnQoY29udGFpbmVyLmdldCgnQXBpJykucG9zdCk7XG4gICAgZG9uZSgpO1xuICB9KTtcblxuICBpdCgnZ2V0KG5hbWUpIC0gc2hvdWxkIHJldHVybiBuZXcgaW5zdGFuY2Ugb2Ygc2VydmljZScsIGZ1bmN0aW9uKGRvbmUpIHtcbiAgICBhc3NlcnQoY29udGFpbmVyLmdldCgnRGInKS5nZXQpO1xuICAgIGRvbmUoKTtcbiAgfSk7XG5cbiAgaXQoJ2dldChuYW1lKSAtIHNob3VsZCB0aHJvdyBlcnJvciBpZiBzZXJ2aWNlIGRvZXMgbm90IGV4aXN0JywgZnVuY3Rpb24oZG9uZSkge1xuICAgIGFzc2VydC50aHJvd3MoZnVuY3Rpb24oKSB7XG4gICAgICBjb250YWluZXIuZ2V0KCdNeUFwaScpO1xuICAgIH0sIEVycm9yKTtcbiAgICBkb25lKCk7XG4gIH0pO1xuXG4gIGl0KCdpbmplY3Qoc2VydmljZSkgLSBpbmplY3QgZGVwZW5kZW5jaWVzIGludG8gc2VydmljZScsIGZ1bmN0aW9uKGRvbmUpIHtcbiAgICBhc3NlcnQoY29udGFpbmVyLmluamVjdChEYlNlcnZpY2UpKTtcbiAgICBkb25lKCk7XG4gIH0pO1xuXG4gIGl0KCdtb2R1bGVzIC0gc2hvdWxkIGNvbnRhaW4gTWFwIG9mIGRlcGVuZGVuY2llcycsIGZ1bmN0aW9uKGRvbmUpIHtcbiAgICBhc3NlcnQoY29udGFpbmVyLm1vZHVsZXMpO1xuICAgIGFzc2VydChjb250YWluZXIubW9kdWxlcy5nZXQpO1xuICAgIGFzc2VydChjb250YWluZXIubW9kdWxlcy5zZXQpO1xuICAgIGFzc2VydChjb250YWluZXIubW9kdWxlcy5oYXMpO1xuICAgIGFzc2VydChjb250YWluZXIubW9kdWxlcy5rZXlzKTtcbiAgICBhc3NlcnQoY29udGFpbmVyLm1vZHVsZXMudmFsdWVzKTtcbiAgICBhc3NlcnQoY29udGFpbmVyLm1vZHVsZXMgaW5zdGFuY2VvZiBNYXApO1xuICAgIGRvbmUoKTtcbiAgfSk7XG5cbiAgaXQoJ21vZHVsZXMuaGFzKCkgLSBzaG91bGQgcmV0dXJuIHRydWUgaWYgbW9kdWxlIGV4aXN0cycsIGZ1bmN0aW9uKGRvbmUpIHtcbiAgICBhc3NlcnQoY29udGFpbmVyLm1vZHVsZXMuaGFzKCdBcGknKSA9PT0gdHJ1ZSk7XG4gICAgYXNzZXJ0KGNvbnRhaW5lci5tb2R1bGVzLmhhcygnVW5rbm93bicpID09PSBmYWxzZSk7XG4gICAgZG9uZSgpO1xuICB9KTtcblxuICBpdCgnbW9kdWxlcy5rZXlzKCkgLSBzaG91bGQgcmV0dXJuIGFsbCBtb2R1bGUga2V5cycsIGZ1bmN0aW9uKGRvbmUpIHtcbiAgICB2YXIga2V5cyA9IGNvbnRhaW5lci5tb2R1bGVzLmtleXMoKTtcbiAgICBjb25zb2xlLmxvZyhrZXlzKTtcbiAgICBhc3NlcnQoa2V5cyk7XG4gICAgZG9uZSgpO1xuICB9KTtcblxufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
