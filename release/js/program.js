'use strict';
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var App = require('./app').default;
var DiContainer = require('./plugins/di-container').default;
var Program = (function (_super) {
    __extends(Program, _super);
    function Program(options) {
        _super.call(this, 'program');
        this.app = new App(options);
        this.register('app', this.app);
        this.register('program', this);
        this.register('namespace', 'sandbox');
        this.register('dbName', 'db');
        this.register('tokenSecret', 'SHHH!');
        //program.plugin('serviceLocator', require('./plugins/server-locator'));
        this.plugin('Logger', require('./plugins/logger').default);
        this.plugin('db', require('./plugins/db-plugin').default);
        if (options.run) {
            this.run(options.run);
        }
    }
    Program.prototype.run = function (cb) {
        console.log('Program.run');
        if (cb) {
            cb(this);
        }
    };
    Program.prototype.use = function (plugin) {
        console.log('Program.use', plugin);
        this.inject(plugin);
        return this;
    };
    return Program;
})(DiContainer);
exports["default"] = Program;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2dyYW0udHMiXSwibmFtZXMiOlsiUHJvZ3JhbSIsIlByb2dyYW0uY29uc3RydWN0b3IiLCJQcm9ncmFtLnJ1biIsIlByb2dyYW0udXNlIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7Ozs7OztBQUNiLElBQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUM7QUFDckMsSUFBTSxXQUFXLEdBQUcsT0FBTyxDQUFDLHdCQUF3QixDQUFDLENBQUMsT0FBTyxDQUFDO0FBRTlEO0lBQXFDQSwyQkFBV0E7SUFDNUNBLGlCQUFZQSxPQUFPQTtRQUNmQyxrQkFBTUEsU0FBU0EsQ0FBQ0EsQ0FBQ0E7UUFDakJBLElBQUlBLENBQUNBLEdBQUdBLEdBQUdBLElBQUlBLEdBQUdBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBO1FBQzVCQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxLQUFLQSxFQUFFQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUMvQkEsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsU0FBU0EsRUFBRUEsSUFBSUEsQ0FBQ0EsQ0FBQ0E7UUFDL0JBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLFdBQVdBLEVBQUVBLFNBQVNBLENBQUNBLENBQUNBO1FBQ3RDQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxRQUFRQSxFQUFFQSxJQUFJQSxDQUFDQSxDQUFDQTtRQUM5QkEsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsYUFBYUEsRUFBRUEsT0FBT0EsQ0FBQ0EsQ0FBQ0E7UUFFdENBLHdFQUF3RUE7UUFDeEVBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLFFBQVFBLEVBQUVBLE9BQU9BLENBQUNBLGtCQUFrQkEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsQ0FBQ0E7UUFDM0RBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLElBQUlBLEVBQUVBLE9BQU9BLENBQUNBLHFCQUFxQkEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsQ0FBQ0E7UUFDMURBLEVBQUVBLENBQUNBLENBQUNBLE9BQU9BLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBO1lBQ2RBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLE9BQU9BLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO1FBQzFCQSxDQUFDQTtJQUVMQSxDQUFDQTtJQUVERCxxQkFBR0EsR0FBSEEsVUFBSUEsRUFBRUE7UUFDRkUsT0FBT0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsYUFBYUEsQ0FBQ0EsQ0FBQ0E7UUFDM0JBLEVBQUVBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBO1lBQ0xBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLENBQUNBO1FBQ2JBLENBQUNBO0lBQ0xBLENBQUNBO0lBRURGLHFCQUFHQSxHQUFIQSxVQUFJQSxNQUFNQTtRQUNORyxPQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxhQUFhQSxFQUFFQSxNQUFNQSxDQUFDQSxDQUFDQTtRQUNuQ0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0E7UUFDcEJBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBO0lBQ2hCQSxDQUFDQTtJQUNMSCxjQUFDQTtBQUFEQSxDQS9CQSxBQStCQ0EsRUEvQm9DLFdBQVcsRUErQi9DO0FBL0JELDRCQStCQyxDQUFBIiwiZmlsZSI6InByb2dyYW0uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5jb25zdCBBcHAgPSByZXF1aXJlKCcuL2FwcCcpLmRlZmF1bHQ7XG5jb25zdCBEaUNvbnRhaW5lciA9IHJlcXVpcmUoJy4vcGx1Z2lucy9kaS1jb250YWluZXInKS5kZWZhdWx0O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9ncmFtIGV4dGVuZHMgRGlDb250YWluZXIge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoJ3Byb2dyYW0nKTtcbiAgICAgICAgdGhpcy5hcHAgPSBuZXcgQXBwKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyKCdhcHAnLCB0aGlzLmFwcCk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXIoJ3Byb2dyYW0nLCB0aGlzKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlcignbmFtZXNwYWNlJywgJ3NhbmRib3gnKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlcignZGJOYW1lJywgJ2RiJyk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXIoJ3Rva2VuU2VjcmV0JywgJ1NISEghJyk7XG5cbiAgICAgICAgLy9wcm9ncmFtLnBsdWdpbignc2VydmljZUxvY2F0b3InLCByZXF1aXJlKCcuL3BsdWdpbnMvc2VydmVyLWxvY2F0b3InKSk7XG4gICAgICAgIHRoaXMucGx1Z2luKCdMb2dnZXInLCByZXF1aXJlKCcuL3BsdWdpbnMvbG9nZ2VyJykuZGVmYXVsdCk7XG4gICAgICAgIHRoaXMucGx1Z2luKCdkYicsIHJlcXVpcmUoJy4vcGx1Z2lucy9kYi1wbHVnaW4nKS5kZWZhdWx0KTtcbiAgICAgICAgaWYgKG9wdGlvbnMucnVuKSB7XG4gICAgICAgICAgICB0aGlzLnJ1bihvcHRpb25zLnJ1bik7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIHJ1bihjYikge1xuICAgICAgICBjb25zb2xlLmxvZygnUHJvZ3JhbS5ydW4nKTtcbiAgICAgICAgaWYgKGNiKSB7XG4gICAgICAgICAgICBjYih0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVzZShwbHVnaW4pIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1Byb2dyYW0udXNlJywgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5pbmplY3QocGx1Z2luKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
