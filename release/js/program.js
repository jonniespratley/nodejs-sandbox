'use strict';
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var App = require('./app');
var DiContainer = require('./plugins/di-container');
var Program = (function (_super) {
    __extends(Program, _super);
    function Program(options) {
        _super.call(this, 'program');
        this.app = new App(options);
        this.register('app', this.app);
        this.register('program', this);
        this.register('namespace', 'sandbox');
        this.register('dbName', 'db');
        this.register('tokenSecret', 'SHHH!');
        //program.plugin('serviceLocator', require('./plugins/server-locator'));
        this.plugin('Logger', require('./plugins/logger'));
        this.plugin('db', require('./plugins/db-plugin'));
        if (options.run) {
            this.run(options.run);
        }
    }
    Program.prototype.run = function (cb) {
        console.log('Program.run');
        if (cb) {
            cb(this);
        }
    };
    Program.prototype.use = function (plugin) {
        console.log('Program.use');
        this.inject(plugin);
        return this;
    };
    return Program;
})(DiContainer);
exports["default"] = Program;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2dyYW0udHMiXSwibmFtZXMiOlsiUHJvZ3JhbSIsIlByb2dyYW0uY29uc3RydWN0b3IiLCJQcm9ncmFtLnJ1biIsIlByb2dyYW0udXNlIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7Ozs7OztBQUNiLElBQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUM3QixJQUFNLFdBQVcsR0FBRyxPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBQztBQUV0RDtJQUFxQ0EsMkJBQVdBO0lBQzVDQSxpQkFBWUEsT0FBT0E7UUFDZkMsa0JBQU1BLFNBQVNBLENBQUNBLENBQUNBO1FBQ2pCQSxJQUFJQSxDQUFDQSxHQUFHQSxHQUFHQSxJQUFJQSxHQUFHQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQTtRQUM1QkEsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsS0FBS0EsRUFBRUEsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFDL0JBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLFNBQVNBLEVBQUVBLElBQUlBLENBQUNBLENBQUNBO1FBQy9CQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxXQUFXQSxFQUFFQSxTQUFTQSxDQUFDQSxDQUFDQTtRQUN0Q0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsUUFBUUEsRUFBRUEsSUFBSUEsQ0FBQ0EsQ0FBQ0E7UUFDOUJBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLGFBQWFBLEVBQUVBLE9BQU9BLENBQUNBLENBQUNBO1FBRXRDQSx3RUFBd0VBO1FBQ3hFQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxRQUFRQSxFQUFFQSxPQUFPQSxDQUFDQSxrQkFBa0JBLENBQUNBLENBQUNBLENBQUNBO1FBQ25EQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxJQUFJQSxFQUFFQSxPQUFPQSxDQUFDQSxxQkFBcUJBLENBQUNBLENBQUNBLENBQUNBO1FBQ2xEQSxFQUFFQSxDQUFDQSxDQUFDQSxPQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNkQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxPQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUMxQkEsQ0FBQ0E7SUFFTEEsQ0FBQ0E7SUFFREQscUJBQUdBLEdBQUhBLFVBQUlBLEVBQUVBO1FBRUZFLE9BQU9BLENBQUNBLEdBQUdBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBO1FBQzNCQSxFQUFFQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQTtZQUNMQSxFQUFFQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtRQUNiQSxDQUFDQTtJQUNMQSxDQUFDQTtJQUVERixxQkFBR0EsR0FBSEEsVUFBSUEsTUFBTUE7UUFDTkcsT0FBT0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsYUFBYUEsQ0FBQ0EsQ0FBQ0E7UUFDM0JBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLE1BQU1BLENBQUNBLENBQUNBO1FBQ3BCQSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQTtJQUNoQkEsQ0FBQ0E7SUFDTEgsY0FBQ0E7QUFBREEsQ0FoQ0EsQUFnQ0NBLEVBaENvQyxXQUFXLEVBZ0MvQztBQWhDRCw0QkFnQ0MsQ0FBQSIsImZpbGUiOiJwcm9ncmFtLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuY29uc3QgQXBwID0gcmVxdWlyZSgnLi9hcHAnKTtcbmNvbnN0IERpQ29udGFpbmVyID0gcmVxdWlyZSgnLi9wbHVnaW5zL2RpLWNvbnRhaW5lcicpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9ncmFtIGV4dGVuZHMgRGlDb250YWluZXIge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIoJ3Byb2dyYW0nKTtcbiAgICAgICAgdGhpcy5hcHAgPSBuZXcgQXBwKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyKCdhcHAnLCB0aGlzLmFwcCk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXIoJ3Byb2dyYW0nLCB0aGlzKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlcignbmFtZXNwYWNlJywgJ3NhbmRib3gnKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlcignZGJOYW1lJywgJ2RiJyk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXIoJ3Rva2VuU2VjcmV0JywgJ1NISEghJyk7XG5cbiAgICAgICAgLy9wcm9ncmFtLnBsdWdpbignc2VydmljZUxvY2F0b3InLCByZXF1aXJlKCcuL3BsdWdpbnMvc2VydmVyLWxvY2F0b3InKSk7XG4gICAgICAgIHRoaXMucGx1Z2luKCdMb2dnZXInLCByZXF1aXJlKCcuL3BsdWdpbnMvbG9nZ2VyJykpO1xuICAgICAgICB0aGlzLnBsdWdpbignZGInLCByZXF1aXJlKCcuL3BsdWdpbnMvZGItcGx1Z2luJykpO1xuICAgICAgICBpZiAob3B0aW9ucy5ydW4pIHtcbiAgICAgICAgICAgIHRoaXMucnVuKG9wdGlvbnMucnVuKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgcnVuKGNiKSB7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1Byb2dyYW0ucnVuJyk7XG4gICAgICAgIGlmIChjYikge1xuICAgICAgICAgICAgY2IodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1c2UocGx1Z2luKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdQcm9ncmFtLnVzZScpO1xuICAgICAgICB0aGlzLmluamVjdChwbHVnaW4pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
